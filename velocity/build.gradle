plugins {
    id 'java'
    id "net.kyori.blossom" version "2.1.0"
}

group = rootProject.group
version = rootProject.version

java.toolchain.languageVersion.set(JavaLanguageVersion.of(17))

configurations.register('velocityJar') {
    canBeConsumed = true
    canBeResolved = false
}

repositories {
    mavenCentral()
    maven {
        name "PaperMC"
        url 'https://repo.papermc.io/repository/maven-public/'
    }
}

base {
    // Modified by TeaCon
    archivesName = "$mod_github_repo-Velocity-$minecraft_version"
}

dependencies {
    implementation project(path: ':util')
    compileOnly 'com.velocitypowered:velocity-api:3.4.0-SNAPSHOT'
    annotationProcessor 'com.velocitypowered:velocity-api:3.4.0-SNAPSHOT'
}

sourceSets {
    main {
        blossom {
            javaSources {
                property "name", mod_name
                property "version", mod_version
                property "authors", mod_authors
                property "description", mod_description
            }
        }
    }
}

jar {
    archiveClassifier.set('pure')
}

artifacts {
    velocityJar jar
}
